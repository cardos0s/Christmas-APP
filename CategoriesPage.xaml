<?xml version="1.0" encoding="utf-8"?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="Christmas.CategoriesPage"
             xmlns:local="clr-namespace:Christmas"> 
    <ContentPage.Content>
        <Grid RowDefinitions="Auto, Auto, Auto, *" 
              ColumnDefinitions="*, *, *" 
              Padding="20">
            
            <Grid Grid.Row="0" Grid.ColumnSpan="3" ColumnDefinitions="Auto, *, Auto" Margin="0, 0, 0, 15">
                <Image Grid.Column="0" Source="hamburger.png" HorizontalOptions="Start" WidthRequest="25" HeightRequest="25"/>
                <Label Grid.Column="1" Text="Gifts" FontAttributes="Bold" HorizontalTextAlignment="Center" VerticalOptions="Center" FontSize="18"/>
                <Image Grid.Column="2" Source="shoppingcart.png" HorizontalOptions="End" WidthRequest="25" HeightRequest="25"/>
            </Grid>
            
            <Border Grid.Column="0" Grid.Row="1" Grid.ColumnSpan="2" BackgroundColor="#e6efef" 
                    Stroke="Transparent" 
                    StrokeShape="RoundRectangle 20,20,20,20" 
                    HeightRequest="150" 
                    Margin="0, 5, 0, 0" Padding="20"> 
                <VerticalStackLayout Spacing="8"> 
                    <Label Text="Do you need to use" /> 
                    <Label Text="Elves help?" FontAttributes="Bold" /> 
                    
                    <Button Text="Try it now"
                            Clicked="Button_OnClicked"
                            BackgroundColor="Red"
                            TextColor="White"
                            CornerRadius="10"
                            WidthRequest="120"
                            HorizontalOptions="Start"/>
                </VerticalStackLayout> 
            </Border>
            
            <Image Source="tree.png"
                   Grid.Row="1"
                   Grid.Column="2"
                   WidthRequest="100"
                   HeightRequest="150"
                   VerticalOptions="End"
                   HorizontalOptions="End"
                   Margin="0, 5, -20, 0"/> 
            
            <Label Grid.Row="2" Grid.ColumnSpan="3" Text="Categories" FontAttributes="Bold" FontSize="16" Margin="0,15,0,0"/> 
            
            <CollectionView 
                Grid.Row="3" 
                Grid.ColumnSpan="3"
                ItemsSource="{Binding Categories}" 
                Margin="0, 10, 0, 0">
                
                <CollectionView.ItemTemplate>
                    
                    <DataTemplate x:DataType="local:Category">
                        <Border BackgroundColor="#f5f7f7" Margin="0, 5" Padding="15" StrokeThickness="1" Stroke="#f5f7f7" StrokeShape="RoundRectangle 10" HeightRequest="70">
                            <Border.GestureRecognizers>
                                <TapGestureRecognizer Tapped="CategoriaTapped" NumberOfTapsRequired="1" /> 
                            </Border.GestureRecognizers>
                            <Grid ColumnDefinitions="50, *, Auto">
                                <Image Grid.Column="0" Source="{Binding ImageSource}" Aspect="AspectFit" VerticalOptions="Center" />
                                <VerticalStackLayout Grid.Column="1" VerticalOptions="Center" Margin="10, 0, 0, 0">
                                    <Label Text="{Binding Name}" FontAttributes="Bold" FontSize="16" />
                                    <Label Text="{Binding DisplayCount}" FontSize="12" TextColor="Gray" />
                                </VerticalStackLayout>
                                <Label Grid.Column="2" Text="â†’" FontSize="24" VerticalOptions="Center" HorizontalOptions="End" />
                            </Grid>
                        </Border>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>

        </Grid>
    </ContentPage.Content>
</ContentPage>